<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome - Ben Reynolds</title>
    <style>
        :root {
            --primary: #2a5298;
            --accent: #1e3c72;
            --background: #000000;
            --text-light: #ffffff;
            --glow-color: rgba(255, 255, 255, 0.7);
        }
        
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: 'Roboto', 'Segoe UI', Arial, sans-serif;
            background: var(--background);
            color: var(--text-light);
        }
        
        #stars-container {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            pointer-events: none; /* Ensure it doesn't block interaction with other elements */
        }
        
        .welcome-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: transparent; /* Changed from black to transparent to show constellation */
            z-index: 1;
        }
        
        .animation-container {
            position: relative;
            width: 100%;
            height: 70%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2;
        }
        
        .box-rotation-path {
            position: relative;
            width: 300px;
            height: 300px;
            animation: rotateInPlane 40s linear infinite; /* Slowed down from 20s to 40s */
        }
        
        .box {
            position: absolute;
            width: 100px;
            height: 100px;
            background-color: rgba(50, 55, 65, 0.85); /* Changed to a nice contrasting grey */
            border: 2px solid rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.7), 
                        0 0 35px rgba(255, 255, 255, 0.4), 
                        0 0 50px rgba(255, 255, 255, 0.2),
                        0 0 65px rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s, box-shadow 0.4s;
            font-size: 14px;
            text-align: center;
            padding: 10px;
            box-sizing: border-box;
            backdrop-filter: blur(3px);
            /* Add counter-rotation to keep boxes upright */
            animation: counterRotate 40s linear infinite;
        }
        
        /* Add counter-rotation animation to keep boxes upright */
        @keyframes counterRotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(-360deg);
            }
        }
        
        .box:hover {
            background-color: rgba(70, 75, 85, 0.95); /* Darker grey on hover for better contrast */
            animation: none; /* Stop the counter-rotation animation on hover */
            transform: scale(1.1); /* Only scale without rotation */
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.9), 
                        0 0 50px rgba(255, 255, 255, 0.6), 
                        0 0 75px rgba(255, 255, 255, 0.3),
                        0 0 100px rgba(255, 255, 255, 0.1);
        }
        
        .welcome-title {
            font-size: 2.8rem;
            color: var(--text-light);
            margin-bottom: 2rem;
            text-align: center;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.5), 
                         0 0 30px rgba(255, 255, 255, 0.3);
            z-index: 2;
        }
        
        .enter-site-btn {
            margin-top: 2rem;
            padding: 12px 30px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 24px;
            font-size: 1.1rem;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5), 
                        0 0 40px rgba(255, 255, 255, 0.3),
                        0 0 60px rgba(255, 255, 255, 0.1);
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
            z-index: 2;
        }
        
        .enter-site-btn:hover {
            background-color: var(--accent);
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.7), 
                        0 0 50px rgba(255, 255, 255, 0.4),
                        0 0 75px rgba(255, 255, 255, 0.2);
        }
        
        .constellation-node {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: white;
            border-radius: 50%;
            z-index: 1;
            transition: opacity 0.5s;
        }
        
        .constellation-line {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.2);
            transform-origin: 0% 50%;
            z-index: 1;
            transition: opacity 0.3s;
        }
        
        @keyframes rotateInPlane {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 0.8;
            }
        }
    </style>
</head>
<body>
    <div id="stars-container"></div>
    
    <div class="welcome-container">
        <h1 class="welcome-title">Welcome to Ben Reynolds' Portfolio</h1>
        
        <div class="animation-container">
            <div id="box-rotation-path" class="box-rotation-path"></div>
        </div>
        
        <button id="enter-site-btn" class="enter-site-btn">Enter Site</button>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation items for boxes
            const navItems = [
                { target: 'home', label: 'Home' },
                { target: 'about', label: 'Overview' },
                { target: 'timeline', label: 'Experience & Skills' },
                { target: 'projects', label: 'Selected Projects' },
                { target: 'contact', label: 'Contact' }
            ];
            
            // Create constellation background
            createConstellationBackground();
            
            // Setup rotating boxes
            setupRotatingBoxes(navItems);
            
            // Enter site button
            document.getElementById('enter-site-btn').addEventListener('click', function() {
                window.location.href = 'index.html';
            });
        });

        function createConstellationBackground() {
            const starsContainer = document.getElementById('stars-container');
            const numberOfNodes = 300; // Significantly increased number of nodes from 150 to 300
            const nodes = [];
            let mouseX = window.innerWidth / 2;
            let mouseY = window.innerHeight / 2;
            
            // Track mouse position
            document.addEventListener('mousemove', function(event) {
                mouseX = event.clientX;
                mouseY = event.clientY;
            });
            
            // Create stars/dots
            for (let i = 0; i < numberOfNodes; i++) {
                const node = document.createElement('div');
                node.className = 'constellation-node';
                
                // Random position
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                
                node.style.left = `${x}px`;
                node.style.top = `${y}px`;
                
                // Random size (some stars bigger than others)
                const size = 1 + Math.random() * 3;
                node.style.width = `${size}px`;
                node.style.height = `${size}px`;
                
                // Random opacity
                node.style.opacity = 0.2 + Math.random() * 0.8;
                
                // Add subtle animation to some nodes
                if (Math.random() > 0.6) {
                    node.style.animation = `pulse ${3 + Math.random() * 7}s infinite`;
                }
                
                starsContainer.appendChild(node);
                nodes.push({
                    element: node,
                    x: x,
                    y: y,
                    originalX: x, // Store original position for movement calculations
                    originalY: y,
                    size: size,
                    speed: 0.5 + Math.random() * 1.5 // Variable speed for smoother animation
                });
            }
            
            // Create connecting lines between nodes (web-like pattern)
            createWebConnections(nodes, starsContainer);
            
            // Add movement to the constellation with mouse interaction
            animateConstellation(nodes, mouseX, mouseY);
        }
        
        function createWebConnections(nodes, container) {
            // Clear any existing lines
            document.querySelectorAll('.constellation-line').forEach(line => line.remove());
            
            // Create a more interconnected web pattern
            for (let i = 0; i < nodes.length; i++) {
                // Find nearby nodes for connections
                const nearbyNodes = nodes
                    .filter((_, idx) => idx !== i)
                    .map((node, index) => {
                        const dx = nodes[i].x - node.x;
                        const dy = nodes[i].y - node.y;
                        return {
                            index: index,
                            node: node,
                            distance: Math.sqrt(dx * dx + dy * dy)
                        };
                    })
                    .filter(item => item.distance < 200) // Adjusted connection distance
                    .sort((a, b) => a.distance - b.distance)
                    .slice(0, 4); // Connect to more nearby nodes (up to 4)
                
                // Create connections with varying opacity based on distance
                nearbyNodes.forEach(nodeInfo => {
                    const opacity = Math.max(0.05, 0.3 - (nodeInfo.distance / 800));
                    createLine(nodes[i], nodeInfo.node, container, opacity);
                });
            }
        }
        
        function createLine(node1, node2, container, opacity = 0.2) {
            const line = document.createElement('div');
            line.className = 'constellation-line';
            
            // Calculate line position and dimensions
            const dx = node2.x - node1.x;
            const dy = node2.y - node1.y;
            const length = Math.sqrt(dx * dx + dy * dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            line.style.width = `${length}px`;
            line.style.height = '1px';
            line.style.left = `${node1.x}px`;
            line.style.top = `${node1.y}px`;
            line.style.transform = `rotate(${angle}deg)`;
            line.style.backgroundColor = `rgba(255, 255, 255, ${opacity})`;
            
            container.appendChild(line);
            return line;
        }
        
        function animateConstellation(nodes, mouseX, mouseY) {
            const starsContainer = document.getElementById('stars-container');
            
            // Get current mouse position
            const currentMouseX = mouseX;
            const currentMouseY = mouseY;
            
            // Animate nodes with mouse interaction
            nodes.forEach(node => {
                // Calculate distance from mouse
                const dx = currentMouseX - node.originalX;
                const dy = currentMouseY - node.originalY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                const maxDistance = 300; // Maximum distance for mouse influence
                
                // Calculate influence factor (closer = stronger effect)
                let influence = 0;
                if (distance < maxDistance) {
                    influence = (1 - distance / maxDistance) * 0.2; // Max 20% influence
                }
                
                // Apply mouse attraction effect
                if (distance < maxDistance) {
                    // Move towards mouse position with easing
                    node.x += (node.originalX + dx * influence - node.x) * 0.03;
                    node.y += (node.originalY + dy * influence - node.y) * 0.03;
                } else {
                    // Return to original position with slight random movement
                    node.x += (node.originalX - node.x) * 0.02 + (Math.random() - 0.5) * 0.3;
                    node.y += (node.originalY - node.y) * 0.02 + (Math.random() - 0.5) * 0.3;
                }
                
                // Update position
                node.element.style.left = `${node.x}px`;
                node.element.style.top = `${node.y}px`;
            });
            
            // Recreate web connections every few frames for better performance
            if (Math.random() > 0.97) {
                createWebConnections(nodes, starsContainer);
            }
            
            // Continue animation
            requestAnimationFrame(() => animateConstellation(nodes, currentMouseX, currentMouseY));
        }

        function setupRotatingBoxes(navItems) {
            const rotationPath = document.getElementById('box-rotation-path');
            
            // Apply rotation animation to the path
            rotationPath.style.animation = 'rotateInPlane 40s linear infinite';
            
            // Create boxes and position them in a circle
            navItems.forEach((item, index) => {
                const box = document.createElement('div');
                box.className = 'box';
                box.dataset.target = item.target;
                box.textContent = item.label;
                
                // Position boxes in a circle (in plane with the screen)
                const angle = (index / navItems.length) * 2 * Math.PI;
                const radius = 150; // Circle radius
                
                // Calculate position on the circle
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                
                box.style.left = `${x + 150 - 50}px`; // Center in the container (150px) - half box width (50px)
                box.style.top = `${y + 150 - 50}px`;  // Center in the container (150px) - half box height (50px)
                
                // Add click event
                box.addEventListener('click', function() {
                    localStorage.setItem('targetSection', item.target);
                    window.location.href = 'index.html';
                });
                
                rotationPath.appendChild(box);
            });
        }
    </script>
</body>
</html>